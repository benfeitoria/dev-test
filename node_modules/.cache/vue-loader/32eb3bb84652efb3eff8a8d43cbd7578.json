{"remainingRequest":"/var/www/html/blog/node_modules/vue-loader/lib/index.js??vue-loader-options!/var/www/html/blog/src/views/CadastroPost.vue?vue&type=script&lang=js&","dependencies":[{"path":"/var/www/html/blog/src/views/CadastroPost.vue","mtime":1569717619459},{"path":"/var/www/html/blog/node_modules/vuetify-loader/lib/loader.js","mtime":1564062719000},{"path":"/var/www/html/blog/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/html/blog/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport api from '../services/api';\nimport { constants } from 'crypto';\nexport default {\n\n    data:()=>({\n       post:{\n          titulo:'',\n          texto :'',\n          categoria :'',\n          imagen:''\n\n       },\n       itemSelect:[],\n       loading :{\n         envia:false,\n         select:false\n       }\n    }),\n    created() {\n              this.pegaCategoria();\n          },\n\n    methods:{\n         \n         pegaCategoria(){\n           this.loading.select =true;\n            api.get('categorias').then(response=>{\n             \n              this.itemSelect = response.data;\n               this.loading.select=false;\n            })\n         },\n\n         enviaPostagem(){\n          this.loading.envia = true\n           const data = {\n             'imagem':this.post.imagen,\n             'titulo':this.post.titulo,\n             'texto_postagem': this.post.texto,\n             'categoria_id':this.post.categoria\n           }\n           console.log(data);\n          \n            \n            api.post('postagens',data).then(response=>{\n                console.log(response.data)\n                this.loading.envia = false\n                this.$router.push({ path: '/', name:'home' })\n            })\n           \n\n         },\n\n         pegaImagem(){\n           this.$refs.fileInput.click()\n         },\n\n         pegaImagemEscolhida(e){\n            let file =event.target.files[0];\n            //  console.log(event.target.files[0]);\n            let reader = new FileReader();\n                  let vm = this;\n\n                  reader.onload = (e) => {\n                    vm.post.imagen = e.target.result;\n                  };\n                  reader.readAsDataURL(file);\n              console.log(vm.post.imagen)\n         }\n            \n\n    }\n\n}\n",{"version":3,"sources":["CadastroPost.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkDA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA","file":"CadastroPost.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"about\">\n    \n  <v-flex xs12 sm6 offset-sm3>\n    \n   <form>\n      <v-row>\n          <v-select \n          v-model=\"post.categoria\"\n           item-text=\"titulo\"\n           item-value=\"id\"\n          :items=\"itemSelect\"\n          label=\"Categoria\"\n          required\n          :loading=\"loading.select\"\n        \n        ></v-select>\n      </v-row>\n      <v-row>\n          <v-text-field\n            v-model=\"post.titulo\"\n            label=\"Titulo \"\n            required\n           \n          ></v-text-field>\n      </v-row>\n      <v-row>\n          <v-btn raised class=\"sucesse\" @click=\"pegaImagem\" >Upload Imagem</v-btn>\n          <input type=\"file\" style=\"display: none\" ref=\"fileInput\" accept=\"image/*\" @change=\"pegaImagemEscolhida\">\n      </v-row>\n      <v-row>\n          <v-textarea\n                v-model=\"post.texto\"\n                label=\"Texto da postagem\"\n                required\n          ></v-textarea>\n      </v-row>\n     \n      <v-row>\n          <v-btn :loading=\"loading.envia\"  class=\"mr-4\" @click=\"enviaPostagem\" >enviar</v-btn>\n        \n      </v-row>\n  </form>\n   \n </v-flex>\n\n  </div>\n</template>\n\n<script>\nimport api from '../services/api';\nimport { constants } from 'crypto';\nexport default {\n\n    data:()=>({\n       post:{\n          titulo:'',\n          texto :'',\n          categoria :'',\n          imagen:''\n\n       },\n       itemSelect:[],\n       loading :{\n         envia:false,\n         select:false\n       }\n    }),\n    created() {\n              this.pegaCategoria();\n          },\n\n    methods:{\n         \n         pegaCategoria(){\n           this.loading.select =true;\n            api.get('categorias').then(response=>{\n             \n              this.itemSelect = response.data;\n               this.loading.select=false;\n            })\n         },\n\n         enviaPostagem(){\n          this.loading.envia = true\n           const data = {\n             'imagem':this.post.imagen,\n             'titulo':this.post.titulo,\n             'texto_postagem': this.post.texto,\n             'categoria_id':this.post.categoria\n           }\n           console.log(data);\n          \n            \n            api.post('postagens',data).then(response=>{\n                console.log(response.data)\n                this.loading.envia = false\n                this.$router.push({ path: '/', name:'home' })\n            })\n           \n\n         },\n\n         pegaImagem(){\n           this.$refs.fileInput.click()\n         },\n\n         pegaImagemEscolhida(e){\n            let file =event.target.files[0];\n            //  console.log(event.target.files[0]);\n            let reader = new FileReader();\n                  let vm = this;\n\n                  reader.onload = (e) => {\n                    vm.post.imagen = e.target.result;\n                  };\n                  reader.readAsDataURL(file);\n              console.log(vm.post.imagen)\n         }\n            \n\n    }\n\n}\n</script>\n"]}]}